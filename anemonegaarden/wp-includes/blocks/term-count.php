<?php
 function render_block_core_term_count( $attributes, $content, $block ) { if ( isset( $block->context['termId'] ) && isset( $block->context['taxonomy'] ) ) { $term = get_term( $block->context['termId'], $block->context['taxonomy'] ); } else { $term = get_queried_object(); if ( ! $term instanceof WP_Term ) { $term = null; } } if ( ! $term || is_wp_error( $term ) ) { return ''; } $term_count = $term->count; switch ( $attributes['bracketType'] ) { case 'none': break; case 'round': $term_count = "({$term_count})"; break; case 'square': $term_count = "[{$term_count}]"; break; case 'curly': $term_count = "{{$term_count}}"; break; case 'angle': $term_count = "<{$term_count}>"; break; default: break; } $wrapper_attributes = get_block_wrapper_attributes(); return sprintf( '<div %1$s>%2$s</div>', $wrapper_attributes, $term_count ); } function register_block_core_term_count() { register_block_type_from_metadata( __DIR__ . '/term-count', array( 'render_callback' => 'render_block_core_term_count', ) ); } add_action( 'init', 'register_block_core_term_count' ); 