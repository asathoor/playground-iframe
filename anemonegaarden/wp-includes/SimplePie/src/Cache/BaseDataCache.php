<?php
 declare(strict_types=1); namespace SimplePie\Cache; use InvalidArgumentException; final class BaseDataCache implements DataCache { private $cache; public function __construct(Base $cache) { $this->cache = $cache; } public function get_data(string $key, $default = null) { $data = $this->cache->load(); if (!is_array($data)) { return $default; } if (!array_key_exists('__cache_expiration_time', $data)) { return $default; } if ($data['__cache_expiration_time'] < time()) { return $default; } unset($data['__cache_expiration_time']); return $data; } public function set_data(string $key, array $value, ?int $ttl = null): bool { if ($ttl === null) { $ttl = 3600; } $value['__cache_expiration_time'] = time() + $ttl; return $this->cache->save($value); } public function delete_data(string $key): bool { return $this->cache->unlink(); } } 